<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Boom Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@font-face {
  font-family: "RuneScape UF";
  src: url("../../fonts/RuneScape-UF.woff2") format("woff2"),
       url("../../fonts/RuneScape-UF.woff") format("woff");
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  overflow: hidden;
  font-family: "RuneScape UF", Arial, sans-serif;

  cursor: url("../../images/cursor/cursor.png"), auto;
  -webkit-user-select: none;
  user-select: none;
}

canvas {
  display: block;
  background: #fff;
}

/* Back button */
.back-button {
  position: fixed;
  top: 8px;
  left: 8px;
  font-size: 28px;
  background: transparent;
  border: none;
  color: #2d93ea;
  font-family: "RuneScape UF", Arial, sans-serif;
  cursor: url("../../images/cursor/cursor-hover.png"), pointer;
  text-transform: lowercase;
  padding: 0;
  z-index: 10;
}
</style>
</head>

<body>
<button class="back-button" onclick="goBack()">‚Üê back</button>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

// Game variables
const gravity = 0.6;
const lift = -12;
const hoopSpeed = 3;
const hoopSpacing = 300;
let hoops = [];
let frame = 0;
let score = 0;
let streak = 0;

// Player
const player = {
  x: width / 4,
  y: height / 2,
  radius: 20,
  vel: 0
};

// Load placeholder assets (replace later)
const playerImg = new Image();
playerImg.src = ""; // e.g., "player.png"
const hoopImg = new Image();
hoopImg.src = ""; // e.g., "hoop.png"

// Handle input
function jump() {
  player.vel = lift;
}
window.addEventListener('mousedown', jump);
window.addEventListener('touchstart', jump);

// Resize
window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});

// Generate hoops
function createHoop() {
  const gapY = Math.random() * (height - 200) + 100; // leave margin
  hoops.push({x: width, y: gapY, passed: false});
}

// Check collision / scoring
function checkHoops() {
  hoops.forEach(h => {
    if (!h.passed && player.x > h.x && player.x < h.x + 60) { // hoop width 60
      h.passed = true;
      const centerDist = Math.abs(player.y - h.y);
      if (centerDist < 15) {
        streak++;
        score += 1 + streak;
      } else {
        streak = 0;
        score += 1;
      }
    }
  });
}

// Draw everything
function draw() {
  ctx.clearRect(0,0,width,height);

  // Player
  ctx.fillStyle = "#2d93ea";
  ctx.beginPath();
  ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
  ctx.fill();
  // Optional image
  // ctx.drawImage(playerImg, player.x - player.radius, player.y - player.radius, player.radius*2, player.radius*2);

  // Hoops
  hoops.forEach(h => {
    ctx.strokeStyle = "#2d93ea";
    ctx.lineWidth = 5;
    ctx.beginPath();
    ctx.arc(h.x + 30, h.y, 30, 0, Math.PI*2);
    ctx.stroke();
    // Optional image
    // ctx.drawImage(hoopImg, h.x, h.y-30, 60, 60);
  });

  // Score
  ctx.fillStyle = "#2d93ea";
  ctx.font = "36px 'RuneScape UF'";
  ctx.fillText("Score: " + score, 20, 50);
  ctx.fillText("Streak: " + streak, 20, 90);
}

// Update game logic
function update() {
  player.vel += gravity;
  player.y += player.vel;

  // Floor & ceiling
  if (player.y + player.radius > height) {
    player.y = height - player.radius;
    player.vel = 0;
  }
  if (player.y - player.radius < 0) {
    player.y = player.radius;
    player.vel = 0;
  }

  // Move hoops
  hoops.forEach(h => h.x -= hoopSpeed);

  // Remove offscreen hoops
  hoops = hoops.filter(h => h.x + 60 > 0);

  // Generate hoops every hoopSpacing pixels
  frame++;
  if (frame % hoopSpacing === 0) createHoop();

  checkHoops();
}

// Main loop
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();

function goBack() {
  window.location.href = "../index.html";
}
</script>
</body>
</html>
