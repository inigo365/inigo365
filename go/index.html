<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>go</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" type="image/png" href="../images/icon.png">

<style>
  @font-face {
    font-family: "RuneScape UF";
    src: url("../fonts/RuneScape-UF.woff2") format("woff2"),
         url("../fonts/RuneScape-UF.woff") format("woff");
  }

  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: white;
    overflow: hidden;
    font-family: "RuneScape UF", Arial, sans-serif;
    cursor: url("../images/cursor/cursor.png"), auto;
  }

  /* PASSWORD SCREEN */
  .password-screen {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    background: white;
    transition: opacity 0.4s ease;
  }

  .password-box {
    text-align: center;
  }

  .password-box label {
    font-size: 32px;
    margin-bottom: 12px;
    display: block;
  }

  .password-box input {
    font-family: "RuneScape UF", Arial, sans-serif;
    font-size: 24px;
    padding: 8px 12px;
    border: 2px solid black;
    background: white;
    outline: none;
    text-align: center;
  }

  .password-box input:hover,
  .password-box input:focus {
    cursor: url("../images/cursor/cursor-hover.png"), auto;
  }

  /* CONTENT PAGE */
  .content-page {
    display: none;
    width: 100%;
    height: 100%;
    background: white;
  }

  .content-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .video-container {
    position: relative;
    display: inline-block; /* shrink-wrap video */
    max-width: 100%;
    max-height: 100%;
  }

  video {
    display: block;
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transform: scale(1.35); /* desktop zoom */
    opacity: 0;
    animation: fadeIn 1.2s ease forwards;
  }

  @media (max-width: 1024px) {
    video { transform: scale(1.25); } /* tablet zoom */
  }

  @media (max-width: 768px) {
    video { transform: scale(1.1); } /* mobile zoom */
  }

  @media (max-width: 480px) {
    video { transform: scale(1); } /* small mobile safe */
  }

  @keyframes fadeIn {
    to { opacity: 1; }
  }

  /* PLAY BUTTON */
  .play-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 52px; /* desktop default */
    color: #2d93ea;
    background: transparent;
    border: none;
    text-transform: lowercase;
    cursor: url("../images/cursor/cursor-hover.png"), pointer;
    opacity: 0;
    transition: opacity 0.4s ease, font-size 0.2s ease;
    z-index: 10;
    font-family: "RuneScape UF", Arial, sans-serif;
  }

  .play-button.show {
    opacity: 1;
  }

  /* Play button responsive font sizes */
  @media (max-width: 1024px) { .play-button { font-size: 44px; } }
  @media (max-width: 768px)  { .play-button { font-size: 36px; } }
  @media (max-width: 480px)  { .play-button { font-size: 28px; } }

  /* BACK BUTTON OVER VIDEO */
  .back-button {
    position: absolute;
    top: 2px;  /* 2px from top of video */
    left: 2px; /* 2px from left of video */
    font-size: 28px;
    color: #2d93ea;
    background: transparent;
    border: none;
    cursor: url("../images/cursor/cursor-hover.png"), pointer;
    z-index: 20;
    opacity: 0;
    transition: opacity 0.4s ease;
    font-family: "RuneScape UF", Arial, sans-serif;
  }

  .back-button.show {
    opacity: 1;
  }
</style>
</head>

<body>

<!-- PASSWORD SCREEN -->
<div class="password-screen" id="passwordScreen">
  <div class="password-box">
    <label>password:</label>
    <input type="password" id="passwordInput" autocomplete="off">
  </div>
</div>

<!-- CONTENT PAGE -->
<div class="content-page" id="contentPage">
  <div class="content-wrapper">
    <div class="video-container">
      <video id="video" playsinline disablePictureInPicture controlslist="nodownload nofullscreen noremoteplayback">
        <source src="video.mp4" type="video/mp4">
      </video>
      <div class="back-button" id="backButton" role="button" tabindex="0">back</div>
    </div>
    <div class="play-button" id="playButton" role="button" tabindex="0">play</div>
  </div>
</div>

<script>
const passwordInput = document.getElementById("passwordInput");
const passwordScreen = document.getElementById("passwordScreen");
const contentPage = document.getElementById("contentPage");
const video = document.getElementById("video");
const playButton = document.getElementById("playButton");
const backButton = document.getElementById("backButton");

let currentAction = null;
let endedListener = null;

const actions = {
  "donovan": { type: "video", src: "video.mp4", redirect: null },
  "home": { type: "redirect", url: "https://inigo365.com/", sameTab: true },
  "rick": { type: "redirect", url: "https://www.youtube.com/watch?v=dQw4w9WgXcQ" },
  "bart simpson": { type: "video", src: "bart.mp4", redirect: null }
};

function resetToPassword() {
  video.pause();
  video.currentTime = 0;

  contentPage.style.display = "none";
  passwordScreen.style.display = "flex";
  passwordScreen.style.opacity = 1;

  playButton.classList.remove("show");
  backButton.classList.remove("show");
  passwordInput.disabled = false;
  passwordInput.value = "";

  history.replaceState(null, "", "/go");
}

passwordInput.addEventListener("keydown", e => {
  if (e.key !== "Enter") return;

  const key = passwordInput.value.toLowerCase();
  const action = actions[key];
  if (!action) {
    passwordInput.value = "";
    return;
  }

  passwordInput.disabled = true;

  if (action.type === "redirect") {
    if (action.sameTab) {
      window.location.href = action.url;
    } else {
      window.open(action.url, "_blank");
      passwordInput.disabled = false;
      passwordInput.value = "";
    }
    return;
  }

  currentAction = action;

  history.pushState({ page: "content" }, "", "#content");

  passwordScreen.style.opacity = 0;
  setTimeout(() => passwordScreen.style.display = "none", 400);

  contentPage.style.display = "block";

  video.src = action.src;
  video.muted = false;
  video.volume = 1;
  video.pause();

  playButton.classList.add("show");

  // Show back button overlay only for video pages
  if (action.type === "video") {
    backButton.classList.add("show");
  } else {
    backButton.classList.remove("show");
  }

  if (endedListener) video.removeEventListener("ended", endedListener);

  endedListener = () => {
    if (action.redirect) window.open(action.redirect, "_blank");
    resetToPassword();
  };

  video.addEventListener("ended", endedListener);
});

playButton.addEventListener("click", () => {
  video.play();
  playButton.classList.remove("show");
});

backButton.addEventListener("click", () => {
  resetToPassword();
});

window.addEventListener("popstate", () => {
  resetToPassword();
});

document.addEventListener("contextmenu", e => e.preventDefault());
</script>

</body>
</html>
